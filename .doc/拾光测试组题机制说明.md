# æ‹¾å…‰æµ‹è¯•ç»„é¢˜æœºåˆ¶è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

æ‹¾å…‰æµ‹è¯•ï¼ˆç­”é¢˜æµ‹è¯•ï¼‰çš„ç»„é¢˜æœºåˆ¶è´Ÿè´£ä»é¢˜åº“ä¸­é€‰æ‹©é¢˜ç›®ï¼Œç»„æˆä¸€æ¬¡æµ‹è¯•ã€‚æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜å½“å‰çš„ç»„é¢˜é€»è¾‘å’Œå®ç°æ–¹å¼ã€‚

---

## ğŸ¯ ç»„é¢˜æµç¨‹

### 1. å¯åŠ¨æµ‹è¯•

å½“ç”¨æˆ·ç‚¹å‡»"å¼€å§‹æ‹¾å…‰"æˆ–è¿›å…¥ç­”é¢˜é¡µé¢æ—¶ï¼Œä¼šè§¦å‘ä»¥ä¸‹æµç¨‹ï¼š

```
ç”¨æˆ·ç‚¹å‡»"å¼€å§‹æ‹¾å…‰"
  â†“
Navigator.push(QuizScreen)
  â†“
QuizScreen.initState()
  â†“
_startQuiz() æ–¹æ³•
  â†“
appState.startTest(questionCount: 10)
  â†“
QuestionService.getRandomQuestions(10)
  â†“
ä»é¢˜åº“ä¸­éšæœºé€‰æ‹©10é“é¢˜ç›®
```

### 2. æ ¸å¿ƒä»£ç ä½ç½®

#### å¯åŠ¨æµ‹è¯•çš„å…¥å£
- **æ–‡ä»¶**: `lib/screens/quiz_screen.dart`
- **æ–¹æ³•**: `_startQuiz()`
- **ä»£ç **:
```dart
Future<void> _startQuiz() async {
  try {
    final appState = Provider.of<AppStateProvider>(context, listen: false);
    await appState.startTest().timeout(
      const Duration(seconds: 10),
      onTimeout: () {
        print('æµ‹è¯•å¯åŠ¨è¶…æ—¶');
      },
    );
    // ... å…¶ä»–åˆå§‹åŒ–é€»è¾‘
  }
}
```

#### ç»„é¢˜é€»è¾‘
- **æ–‡ä»¶**: `lib/services/app_state_provider.dart`
- **æ–¹æ³•**: `startTest({int questionCount = 10})`
- **ä»£ç **:
```dart
Future<void> startTest({int questionCount = 10}) async {
  try {
    // å°è¯•ä»æ•°æ®åº“è·å–é¢˜ç›®
    _currentTestQuestions = await _questionService.getRandomQuestions(questionCount);
  } catch (e) {
    print('ä»æ•°æ®åº“è·å–é¢˜ç›®å¤±è´¥ï¼Œä½¿ç”¨ç¤ºä¾‹é¢˜ç›®: $e');
    // å¦‚æœæ•°æ®åº“å¤±è´¥ï¼Œä½¿ç”¨ç¤ºä¾‹é¢˜ç›®
    _currentTestQuestions = _getSampleQuestions().take(questionCount).toList();
  }
  
  // å¦‚æœä»ç„¶æ²¡æœ‰é¢˜ç›®ï¼Œä½¿ç”¨é»˜è®¤ç¤ºä¾‹
  if (_currentTestQuestions.isEmpty) {
    _currentTestQuestions = _getSampleQuestions().take(questionCount).toList();
  }
  
  _currentQuestionIndex = 0;
  _userAnswers = List.filled(_currentTestQuestions.length, -1);
  _questionTimes = List.filled(_currentTestQuestions.length, 0);
  _testStartTime = DateTime.now();
  _isTestInProgress = true;
  
  await _saveTestState();
  notifyListeners();
}
```

#### éšæœºè·å–é¢˜ç›®
- **æ–‡ä»¶**: `lib/services/question_service.dart`
- **æ–¹æ³•**: `getRandomQuestions(int count)`
- **ä»£ç **:
```dart
Future<List<Question>> getRandomQuestions(int count) async {
  try {
    final allQuestions = await _storage.getAllQuestions();
    
    // å¦‚æœé¢˜ç›®æ•°é‡ä¸è¶³ï¼Œç›´æ¥è¿”å›æ‰€æœ‰é¢˜ç›®
    if (allQuestions.length <= count) {
      return allQuestions;
    }
    
    // ä½¿ç”¨ Dart çš„ Random å’Œ shuffle è¿›è¡ŒéšæœºåŒ–
    final random = Random();
    final shuffled = List<Question>.from(allQuestions)..shuffle(random);
    
    // è¿”å›å‰ count ä¸ªé¢˜ç›®
    return shuffled.take(count).toList();
  } catch (e) {
    print('è·å–éšæœºé¢˜ç›®å¤±è´¥: $e');
    return [];
  }
}
```

---

## ğŸ” ç»„é¢˜è§„åˆ™è¯¦è§£

### ç»„é¢˜æ¨¡å¼ï¼š**ä¸‰ç§æ¨¡å¼å¯é€‰**

åº”ç”¨ç°åœ¨æ”¯æŒä¸‰ç§ç»„é¢˜æ¨¡å¼ï¼š

#### 1. éšæœºæ¨¡å¼ï¼ˆRandom Modeï¼‰âœ¨ é»˜è®¤
- **æ¨¡å¼æ ‡è¯†**: `QuestionSelectionMode.random`
- **ç‰¹ç‚¹**: å®Œå…¨éšæœºé€‰æ‹©ï¼Œç®€å•é«˜æ•ˆ
- **é€‚ç”¨åœºæ™¯**: å¿«é€Ÿæµ‹è¯•ã€æ—¥å¸¸ç»ƒä¹ 
- **å®ç°**: 
  1. ä»æœ¬åœ°å­˜å‚¨è·å–æ‰€æœ‰é¢˜ç›®ï¼ˆ150é“ï¼‰
  2. ä½¿ç”¨ `Random` å’Œ `shuffle` æ‰“ä¹±é¡ºåº
  3. å–å‰ `count` é“é¢˜ç›®

#### 2. å‡è¡¡æ¨¡å¼ï¼ˆBalanced Modeï¼‰âœ¨ æ–°å¢
- **æ¨¡å¼æ ‡è¯†**: `QuestionSelectionMode.balanced`
- **ç‰¹ç‚¹**: æŒ‰åˆ†ç±»ã€éš¾åº¦ã€å¹´ä»£å‡è¡¡åˆ†é…ï¼Œç¡®ä¿åˆ†å¸ƒå‡åŒ€
- **é€‚ç”¨åœºæ™¯**: å…¨é¢æµ‹è¯•ã€ç³»ç»Ÿå­¦ä¹ 
- **å®ç°ç­–ç•¥**:
  1. **åˆ†ç±»å‡è¡¡**: æ¯ä¸ªåˆ†ç±»ï¼ˆå½±è§†ã€éŸ³ä¹ã€äº‹ä»¶ï¼‰è‡³å°‘åˆ†é… count/3 é“é¢˜ç›®
  2. **éš¾åº¦å‡è¡¡**: ç®€å•33%ã€ä¸­ç­‰50%ã€å›°éš¾17%
  3. **å¹´ä»£å‡è¡¡**: æ¯ä¸ªå¹´ä»£ï¼ˆ80ã€90ã€00ï¼‰çº¦åˆ†é… count/3 é“é¢˜ç›®
  4. **å»é‡ä¿è¯**: ä½¿ç”¨ `usedQuestionIds` ç¡®ä¿ä¸é‡å¤
  5. **è‡ªåŠ¨è¡¥å……**: å¦‚æœæŸç»´åº¦ä¸è¶³ï¼Œä»å…¶ä»–ç»´åº¦è¡¥å……

#### 3. æ™ºèƒ½æ¨èæ¨¡å¼ï¼ˆSmart Modeï¼‰âœ¨ æ–°å¢
- **æ¨¡å¼æ ‡è¯†**: `QuestionSelectionMode.smart`
- **ç‰¹ç‚¹**: æ ¹æ®ç”¨æˆ·å†å²è¡¨ç°æ™ºèƒ½æ¨èï¼Œä¸ªæ€§åŒ–å­¦ä¹ 
- **é€‚ç”¨åœºæ™¯**: é’ˆå¯¹æ€§æå‡ã€è–„å¼±ç¯èŠ‚å¼ºåŒ–
- **æ¨èç­–ç•¥**:
  1. **è–„å¼±åˆ†ç±»æ¨è**: æ¨èç”¨æˆ·ç­”é”™ç‡é«˜çš„åˆ†ç±»
  2. **éš¾åº¦è‡ªé€‚åº”**: æ ¹æ®æœ€è¿‘5æ¬¡æµ‹è¯•å‡†ç¡®ç‡æ¨èéš¾åº¦
     - å‡†ç¡®ç‡ â‰¥ 90% â†’ æ¨èå›°éš¾é¢˜ç›®
     - å‡†ç¡®ç‡ â‰¥ 70% â†’ æ¨èä¸­ç­‰é¢˜ç›®
     - å‡†ç¡®ç‡ < 70% â†’ æ¨èç®€å•é¢˜ç›®
  3. **ç”¨æˆ·åå¥½**: æ¨èç”¨æˆ·æ„Ÿå…´è¶£çš„æ ‡ç­¾é¢˜ç›®
  4. **æ—¶é—´åå¥½**: æ¨èç”¨æˆ·è¡¨ç°æœ€å¥½çš„æ—¶é—´æ®µç›¸å…³é¢˜ç›®
  5. **è‡ªåŠ¨é™çº§**: å¦‚æœæ¨èå¤±è´¥ï¼Œè‡ªåŠ¨å›é€€åˆ°å‡è¡¡æ¨¡å¼

### é»˜è®¤é…ç½®

#### é¢˜ç›®æ•°é‡
- **é»˜è®¤æ•°é‡**: 10é“é¢˜ç›®
- **å¯é…ç½®**: é€šè¿‡ `startTest(questionCount: n)` å‚æ•°å¯ä»¥ä¿®æ”¹

#### é»˜è®¤æ¨¡å¼
- **å½“å‰é»˜è®¤**: éšæœºæ¨¡å¼ï¼ˆ`QuestionSelectionMode.random`ï¼‰
- **å¯åˆ‡æ¢**: é€šè¿‡ `setQuestionSelectionMode()` æ–¹æ³•åˆ‡æ¢

### å»é‡æœºåˆ¶
- **è‡ªåŠ¨å»é‡**: æ‰€æœ‰æ¨¡å¼éƒ½ç¡®ä¿å•æ¬¡æµ‹è¯•å†…ä¸é‡å¤
- **å•æ¬¡æµ‹è¯•**: åŒä¸€é“é¢˜ç›®ä¸ä¼šå‡ºç°ä¸¤æ¬¡

### é™çº§æœºåˆ¶
- **ç¬¬ä¸€çº§**: ä»æœ¬åœ°å­˜å‚¨ï¼ˆJSONæ–‡ä»¶ï¼‰è·å–é¢˜ç›®
- **ç¬¬äºŒçº§**: å¦‚æœå¤±è´¥ï¼Œä½¿ç”¨å†…ç½®ç¤ºä¾‹é¢˜ç›®ï¼ˆ4é“ï¼‰
- **ç¬¬ä¸‰çº§**: å¦‚æœä»ç„¶ä¸ºç©ºï¼Œä½¿ç”¨é»˜è®¤ç¤ºä¾‹é¢˜ç›®
- **æ™ºèƒ½æ¨¡å¼**: å¦‚æœæ¨èå¤±è´¥ï¼Œè‡ªåŠ¨å›é€€åˆ°å‡è¡¡æ¨¡å¼

---

## ğŸ“Š é¢˜ç›®åˆ†å¸ƒç‰¹ç‚¹

### å½“å‰å®ç°çš„åˆ†å¸ƒç‰¹å¾

ç”±äºä½¿ç”¨**çº¯éšæœºé€‰æ‹©**ï¼Œæ¯æ¬¡æµ‹è¯•çš„é¢˜ç›®åˆ†å¸ƒå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

#### 1. åˆ†ç±»åˆ†å¸ƒï¼ˆéšæœºï¼‰
- ç†è®ºä¸Šï¼šå½±è§†ã€éŸ³ä¹ã€äº‹ä»¶å„å çº¦1/3
- å®é™…ï¼šéšæœºåˆ†å¸ƒï¼Œå¯èƒ½ä¸å‡è¡¡
- ç¤ºä¾‹ï¼šä¸€æ¬¡æµ‹è¯•å¯èƒ½10é“éƒ½æ˜¯å½±è§†é¢˜ï¼Œä¹Ÿå¯èƒ½å½±è§†5é“ã€éŸ³ä¹3é“ã€äº‹ä»¶2é“

#### 2. éš¾åº¦åˆ†å¸ƒï¼ˆéšæœºï¼‰
- ç†è®ºä¸Šï¼šç®€å•33%ã€ä¸­ç­‰50%ã€å›°éš¾17%
- å®é™…ï¼šéšæœºåˆ†å¸ƒï¼Œå¯èƒ½ä¸å‡è¡¡
- ç¤ºä¾‹ï¼šå¯èƒ½å…¨éƒ¨æ˜¯ç®€å•é¢˜ï¼Œä¹Ÿå¯èƒ½å…¨éƒ¨æ˜¯å›°éš¾é¢˜

#### 3. å¹´ä»£åˆ†å¸ƒï¼ˆéšæœºï¼‰
- ç†è®ºä¸Šï¼š80å¹´ä»£ã€90å¹´ä»£ã€00å¹´ä»£å„å çº¦1/3
- å®é™…ï¼šéšæœºåˆ†å¸ƒï¼Œå¯èƒ½ä¸å‡è¡¡
- ç¤ºä¾‹ï¼šå¯èƒ½å…¨éƒ¨æ˜¯80å¹´ä»£é¢˜ç›®ï¼Œä¹Ÿå¯èƒ½å¹´ä»£åˆ†å¸ƒå‡åŒ€

---

## ğŸ¨ å¯ç”¨çš„é¢˜ç›®è·å–æ–¹æ³•

è™½ç„¶å½“å‰åªä½¿ç”¨äº† `getRandomQuestions()`ï¼Œä½† `QuestionService` è¿˜æä¾›äº†å…¶ä»–è·å–æ–¹å¼ï¼š

### 1. æŒ‰åˆ†ç±»è·å–
```dart
Future<List<Question>> getQuestionsByCategory(String category)
// ç¤ºä¾‹ï¼šè·å–æ‰€æœ‰å½±è§†é¢˜ç›®
final filmQuestions = await questionService.getQuestionsByCategory('å½±è§†');
```

### 2. æŒ‰éš¾åº¦è·å–
```dart
Future<List<Question>> getQuestionsByDifficulty(String difficulty)
// ç¤ºä¾‹ï¼šè·å–æ‰€æœ‰ç®€å•é¢˜ç›®
final easyQuestions = await questionService.getQuestionsByDifficulty('ç®€å•');
```

### 3. æŒ‰ä¸»é¢˜è·å–
```dart
Future<List<Question>> getQuestionsByTheme(String theme)
// ç¤ºä¾‹ï¼šè·å–æ‰€æœ‰80å¹´ä»£å½±è§†é¢˜ç›®
final questions = await questionService.getQuestionsByTheme('80å¹´ä»£å½±è§†');
```

### 4. æŒ‰IDè·å–
```dart
Future<List<Question>> getQuestionsByIds(List<int> ids)
// ç¤ºä¾‹ï¼šè·å–æŒ‡å®šIDçš„é¢˜ç›®
final questions = await questionService.getQuestionsByIds([1, 2, 3, 4, 5]);
```

---

## ğŸ’¡ æ™ºèƒ½æ¨èç³»ç»Ÿï¼ˆå·²å®ç°ä½†æœªä½¿ç”¨ï¼‰

é¡¹ç›®ä¸­è¿˜å®ç°äº† `IntelligentRecommendationSystem`ï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·è¡¨ç°æ™ºèƒ½æ¨èé¢˜ç›®ï¼š

### æ¨èç­–ç•¥
1. **è–„å¼±åˆ†ç±»æ¨è**: æ¨èç”¨æˆ·ç­”é”™ç‡é«˜çš„åˆ†ç±»
2. **éš¾åº¦è°ƒèŠ‚**: æ ¹æ®æœ€è¿‘5æ¬¡æµ‹è¯•çš„å¹³å‡å‡†ç¡®ç‡æ¨èéš¾åº¦
3. **æ—¶é—´åå¥½**: æ¨èç”¨æˆ·åå¥½çš„å¹´ä»£é¢˜ç›®
4. **ç”¨æˆ·æ ‡ç­¾**: æ¨èç”¨æˆ·æ„Ÿå…´è¶£çš„æ ‡ç­¾é¢˜ç›®

### ä½ç½®
- **æ–‡ä»¶**: `lib/services/recommendation_service.dart`
- **æ–¹æ³•**: `recommendQuestionsByPerformance()`

### å½“å‰çŠ¶æ€
- âœ… **å·²å®ç°**: æ™ºèƒ½æ¨èé€»è¾‘å·²ç¼–å†™å®Œæˆ
- âš ï¸ **æœªä½¿ç”¨**: å½“å‰æµ‹è¯•ä»ä½¿ç”¨çº¯éšæœºé€‰æ‹©

---

## ğŸ”„ ç»„é¢˜æµç¨‹æ—¶åºå›¾

```
ç”¨æˆ·ç‚¹å‡»"å¼€å§‹æ‹¾å…‰"
    â”‚
    â”œâ”€â†’ QuizScreen.initState()
    â”‚      â”‚
    â”‚      â””â”€â†’ _startQuiz()
    â”‚             â”‚
    â”‚             â””â”€â†’ appState.startTest(questionCount: 10)
    â”‚                    â”‚
    â”‚                    â”œâ”€â†’ QuestionService.getRandomQuestions(10)
    â”‚                    â”‚      â”‚
    â”‚                    â”‚      â”œâ”€â†’ JsonStorageService.getAllQuestions()
    â”‚                    â”‚      â”‚      â””â”€â†’ ä»æœ¬åœ°JSONæ–‡ä»¶è¯»å–æ‰€æœ‰é¢˜ç›®
    â”‚                    â”‚      â”‚
    â”‚                    â”‚      â”œâ”€â†’ Random().shuffle(allQuestions)
    â”‚                    â”‚      â”‚      â””â”€â†’ æ‰“ä¹±é¢˜ç›®é¡ºåº
    â”‚                    â”‚      â”‚
    â”‚                    â”‚      â””â”€â†’ take(10)
    â”‚                    â”‚             â””â”€â†’ å–å‰10é“é¢˜ç›®
    â”‚                    â”‚
    â”‚                    â”œâ”€â†’ å¦‚æœå¤±è´¥ï¼Œä½¿ç”¨ç¤ºä¾‹é¢˜ç›®
    â”‚                    â”‚
    â”‚                    â””â”€â†’ ä¿å­˜æµ‹è¯•çŠ¶æ€å¹¶é€šçŸ¥ç›‘å¬è€…
    â”‚
    â””â”€â†’ æ˜¾ç¤ºç¬¬ä¸€é“é¢˜ç›®
```

---

## ğŸ“ ç»„é¢˜å‚æ•°

### startTest æ–¹æ³•å‚æ•°

```dart
Future<void> startTest({int questionCount = 10})
```

| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `questionCount` | `int` | `10` | æµ‹è¯•é¢˜ç›®æ•°é‡ |

### ä½¿ç”¨ç¤ºä¾‹

```dart
// ä½¿ç”¨é»˜è®¤10é“é¢˜ç›®
await appState.startTest();

// è‡ªå®šä¹‰é¢˜ç›®æ•°é‡
await appState.startTest(questionCount: 20);

// å¿«é€Ÿæµ‹è¯•ï¼ˆ5é“é¢˜ç›®ï¼‰
await appState.startTest(questionCount: 5);
```

---

## âœ… å·²å®ç°æ”¹è¿›

### 1. å‡è¡¡åˆ†å¸ƒç»„é¢˜ âœ…
- **çŠ¶æ€**: å·²å®ç°
- **åŠŸèƒ½**: `QuestionService.getBalancedQuestions()`
- **ç‰¹ç‚¹**: æŒ‰åˆ†ç±»ã€éš¾åº¦ã€å¹´ä»£å‡è¡¡åˆ†é…
- **ä½¿ç”¨**: `startTest(mode: QuestionSelectionMode.balanced)`

### 2. æ™ºèƒ½æ¨èç»„é¢˜ âœ…
- **çŠ¶æ€**: å·²å®ç°å¹¶é›†æˆ
- **åŠŸèƒ½**: `IntelligentRecommendationSystem.recommendQuestionsByPerformance()`
- **ç‰¹ç‚¹**: æ ¹æ®ç”¨æˆ·å†å²è¡¨ç°ä¸ªæ€§åŒ–æ¨è
- **ä½¿ç”¨**: `startTest(mode: QuestionSelectionMode.smart)`

### 3. ç»„é¢˜æ¨¡å¼åˆ‡æ¢ âœ…
- **çŠ¶æ€**: å·²å®ç°
- **åŠŸèƒ½**: `AppStateProvider.setQuestionSelectionMode()`
- **ç‰¹ç‚¹**: æ”¯æŒä¸‰ç§æ¨¡å¼åˆ‡æ¢
- **ä½¿ç”¨**: `appState.setQuestionSelectionMode(QuestionSelectionMode.balanced)`

## âš ï¸ å½“å‰é™åˆ¶

### 1. å›ºå®šé¢˜ç›®æ•°é‡ï¼ˆéƒ¨åˆ†è§£å†³ï¼‰
- **é—®é¢˜**: é»˜è®¤å›ºå®š10é“é¢˜ç›®
- **å½±å“**: ç”¨æˆ·æ— æ³•åœ¨UIä¸­è‡ªå®šä¹‰æµ‹è¯•é•¿åº¦
- **ç°çŠ¶**: ä»£ç æ”¯æŒè‡ªå®šä¹‰ï¼Œä½†UIæœªæä¾›é€‰æ‹©
- **å»ºè®®**: å¯ä»¥æ·»åŠ é¢˜ç›®æ•°é‡é€‰æ‹©UI

### 2. æ— é¢˜ç›®è¿‡æ»¤
- **é—®é¢˜**: æ— æ³•æ’é™¤å·²åšè¿‡çš„é¢˜ç›®
- **å½±å“**: å¯èƒ½é‡å¤å‡ºç°åšè¿‡çš„é¢˜ç›®
- **å»ºè®®**: å¯ä»¥æ·»åŠ "æ–°é¢˜æ¨¡å¼"ï¼Œåªé€‰æ‹©æœªåšè¿‡çš„é¢˜ç›®

---

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### 1. éšæœºæ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
```dart
// ä½¿ç”¨é»˜è®¤éšæœºæ¨¡å¼
await appState.startTest(questionCount: 10);

// æˆ–è€…æ˜¾å¼æŒ‡å®š
await appState.startTest(
  questionCount: 10,
  mode: QuestionSelectionMode.random,
);
```

### 2. å‡è¡¡æ¨¡å¼
```dart
// ä½¿ç”¨å‡è¡¡åˆ†å¸ƒæ¨¡å¼
await appState.startTest(
  questionCount: 10,
  mode: QuestionSelectionMode.balanced,
);

// æˆ–è€…å…ˆè®¾ç½®æ¨¡å¼ï¼Œå†å¼€å§‹æµ‹è¯•
appState.setQuestionSelectionMode(QuestionSelectionMode.balanced);
await appState.startTest(questionCount: 10);
```

### 3. æ™ºèƒ½æ¨èæ¨¡å¼
```dart
// ä½¿ç”¨æ™ºèƒ½æ¨èæ¨¡å¼
await appState.startTest(
  questionCount: 10,
  mode: QuestionSelectionMode.smart,
);

// æˆ–è€…å…ˆè®¾ç½®æ¨¡å¼ï¼Œå†å¼€å§‹æµ‹è¯•
appState.setQuestionSelectionMode(QuestionSelectionMode.smart);
await appState.startTest(questionCount: 10);
```

### 4. è·å–å½“å‰æ¨¡å¼
```dart
// è·å–å½“å‰ç»„é¢˜æ¨¡å¼
final currentMode = appState.questionSelectionMode;
print('å½“å‰ç»„é¢˜æ¨¡å¼: $currentMode');
```

## âœ… UIæ”¯æŒæ¨¡å¼åˆ‡æ¢ âœ… **å·²å®ç°**

### å®ç°ä½ç½®
- **æ–‡ä»¶**: `lib/screens/settings_screen.dart`
- **åŠŸèƒ½**: åœ¨è®¾ç½®é¡µé¢æ·»åŠ "æ‹¾å…‰æµ‹è¯•è®¾ç½®"åŒºåŸŸ
- **ä½ç½®**: è¯­éŸ³è®¾ç½®å’Œåº”ç”¨ä¿¡æ¯ä¹‹é—´

### åŠŸèƒ½è¯´æ˜
1. **è®¾ç½®å…¥å£**: è®¾ç½®é¡µé¢ â†’ "æ‹¾å…‰æµ‹è¯•è®¾ç½®" â†’ "ç»„é¢˜æ¨¡å¼"
2. **æ¨¡å¼é€‰æ‹©**: ç‚¹å‡»åå¼¹å‡ºå¯¹è¯æ¡†ï¼Œæ˜¾ç¤ºä¸‰ç§æ¨¡å¼é€‰é¡¹
3. **å®æ—¶æ›´æ–°**: é€‰æ‹©åç«‹å³ç”Ÿæ•ˆï¼Œå¹¶æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
4. **æŒä¹…åŒ–**: é€‰æ‹©çš„æ¨¡å¼ä¼šä¿å­˜ï¼Œä¸‹æ¬¡æµ‹è¯•æ—¶è‡ªåŠ¨ä½¿ç”¨

### ä½¿ç”¨æ–¹å¼
1. æ‰“å¼€åº”ç”¨ â†’ è¿›å…¥"è®¾ç½®"é¡µé¢
2. æ‰¾åˆ°"æ‹¾å…‰æµ‹è¯•è®¾ç½®"åŒºåŸŸ
3. ç‚¹å‡»"ç»„é¢˜æ¨¡å¼"
4. åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­é€‰æ‹©æƒ³è¦çš„æ¨¡å¼ï¼š
   - **éšæœºæ¨¡å¼**: å®Œå…¨éšæœºé€‰æ‹©é¢˜ç›®ï¼Œç®€å•é«˜æ•ˆ
   - **å‡è¡¡æ¨¡å¼**: æŒ‰åˆ†ç±»ã€éš¾åº¦ã€å¹´ä»£å‡è¡¡åˆ†é…ï¼Œç¡®ä¿åˆ†å¸ƒå‡åŒ€
   - **æ™ºèƒ½æ¨èæ¨¡å¼**: æ ¹æ®æ‚¨çš„å†å²è¡¨ç°æ™ºèƒ½æ¨èï¼Œä¸ªæ€§åŒ–å­¦ä¹ 
5. é€‰æ‹©åè‡ªåŠ¨ä¿å­˜ï¼Œä¸‹æ¬¡å¼€å§‹æµ‹è¯•æ—¶ä¼šä½¿ç”¨é€‰æ‹©çš„æ¨¡å¼

## ğŸ”„ åç»­æ”¹è¿›å»ºè®®

### 2. æ–°é¢˜æ¨¡å¼
- **å»ºè®®**: æ·»åŠ "æ–°é¢˜æ¨¡å¼"ï¼Œåªé€‰æ‹©æœªåšè¿‡çš„é¢˜ç›®
- **å®ç°**: è¿‡æ»¤å·²å®Œæˆçš„é¢˜ç›®ï¼Œåªé€‰æ‹©æ–°é¢˜ç›®

### 3. è‡ªå®šä¹‰è¿‡æ»¤
- **å»ºè®®**: æ”¯æŒæŒ‰åˆ†ç±»ã€éš¾åº¦ã€å¹´ä»£ç­›é€‰
- **å®ç°**: æ·»åŠ ç­›é€‰å‚æ•°ï¼Œåœ¨ç»„é¢˜æ—¶åº”ç”¨è¿‡æ»¤æ¡ä»¶

---

## ğŸ“š ç›¸å…³æ–‡ä»¶

### æ ¸å¿ƒæ–‡ä»¶
- `lib/screens/quiz_screen.dart` - ç­”é¢˜é¡µé¢
- `lib/screens/settings_screen.dart` - è®¾ç½®é¡µé¢ï¼ˆåŒ…å«ç»„é¢˜æ¨¡å¼é€‰æ‹©UIï¼‰âœ…
- `lib/services/app_state_provider.dart` - æµ‹è¯•çŠ¶æ€ç®¡ç†ï¼ˆåŒ…å«ç»„é¢˜æ¨¡å¼ï¼‰
- `lib/services/question_service.dart` - é¢˜ç›®æœåŠ¡ï¼ˆåŒ…å«å‡è¡¡ç»„é¢˜æ–¹æ³•ï¼‰
- `lib/services/json_storage_service.dart` - æ•°æ®å­˜å‚¨

### ç›¸å…³æ–‡ä»¶
- `lib/services/recommendation_service.dart` - æ™ºèƒ½æ¨èç³»ç»Ÿï¼ˆå·²é›†æˆï¼‰
- `lib/services/personalization_service.dart` - ä¸ªæ€§åŒ–æœåŠ¡
- `lib/models/question.dart` - é¢˜ç›®æ•°æ®æ¨¡å‹
- `lib/models/test_record.dart` - æµ‹è¯•è®°å½•æ¨¡å‹ï¼ˆç”¨äºæ™ºèƒ½æ¨èï¼‰

---

## ğŸ“Š ç»Ÿè®¡æ•°æ®

### å½“å‰é¢˜åº“è§„æ¨¡
- **æ€»é¢˜ç›®æ•°**: 150é“
- **åˆ†ç±»åˆ†å¸ƒ**: å½±è§†50é“ã€éŸ³ä¹50é“ã€äº‹ä»¶50é“
- **éš¾åº¦åˆ†å¸ƒ**: ç®€å•50é“ã€ä¸­ç­‰75é“ã€å›°éš¾25é“
- **å¹´ä»£åˆ†å¸ƒ**: 80å¹´ä»£51é“ã€90å¹´ä»£51é“ã€00å¹´ä»£48é“

### æµ‹è¯•é…ç½®
- **é»˜è®¤é¢˜ç›®æ•°**: 10é“
- **é»˜è®¤ç»„é¢˜æ¨¡å¼**: éšæœºæ¨¡å¼ï¼ˆ`QuestionSelectionMode.random`ï¼‰
- **å¯ç”¨æ¨¡å¼**: éšæœºã€å‡è¡¡ã€æ™ºèƒ½æ¨è
- **å»é‡æœºåˆ¶**: å•æ¬¡æµ‹è¯•å†…ä¸é‡å¤
- **é¢˜ç›®æ¥æº**: æœ¬åœ°JSONå­˜å‚¨ï¼ˆ150é“é¢˜ç›®ï¼‰

### æ¨¡å¼å¯¹æ¯”

| æ¨¡å¼ | ç‰¹ç‚¹ | é€‚ç”¨åœºæ™¯ | é¢˜ç›®åˆ†å¸ƒ |
|------|------|---------|---------|
| **éšæœºæ¨¡å¼** | å®Œå…¨éšæœºï¼Œç®€å•é«˜æ•ˆ | å¿«é€Ÿæµ‹è¯•ã€æ—¥å¸¸ç»ƒä¹  | éšæœºåˆ†å¸ƒï¼Œå¯èƒ½ä¸å‡è¡¡ |
| **å‡è¡¡æ¨¡å¼** | åˆ†ç±»/éš¾åº¦/å¹´ä»£å‡è¡¡ | å…¨é¢æµ‹è¯•ã€ç³»ç»Ÿå­¦ä¹  | åˆ†å¸ƒå‡åŒ€ï¼Œä¿è¯è¦†ç›– |
| **æ™ºèƒ½æ¨¡å¼** | ä¸ªæ€§åŒ–æ¨èï¼Œé’ˆå¯¹æ€§æå‡ | è–„å¼±ç¯èŠ‚å¼ºåŒ– | æ ¹æ®ç”¨æˆ·è¡¨ç°åŠ¨æ€è°ƒæ•´ |

---

**åˆ›å»ºæ—¶é—´**: 2024å¹´
**æœ€åæ›´æ–°**: 2024å¹´
**æ–‡æ¡£çŠ¶æ€**: å½“å‰å®ç°è¯´æ˜

